<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Scripting for Fun | Adam Dymitruk</title>
<meta name="keywords" content="">
<meta name="description" content="I&rsquo;ve been playing minecraft a couple of nights a week for about 40 minutes each time with my son. This seems to be a trend even for very young children. It wasn&rsquo;t too long before I found myself running a server so that we could play together with our friends (We even setup a trello board for our missions and projects!). It&rsquo;s much more fun to work together and build something. Discovering new places and building contraptions, houses and other things is very stimulating for a young mind - as well as my old mind. This generation has so much more at their disposal.">
<meta name="author" content="Adam Dymitruk">
<link rel="canonical" href="../../posts/2012-07-20-scripting-for-fun/">
<link crossorigin="anonymous" href="../../assets/css/stylesheet.c2189e7d36d72767de292f8b9d897e4a464aa5bc7eb692cda50064f5eb9eeece.css" integrity="sha256-whiefTbXJ2feKS&#43;LnYl&#43;SkZKpbx&#43;tpLNpQBk9eue7s4=" rel="preload stylesheet" as="style">
<link rel="icon" href="../../favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" href="../../apple-touch-icon.png">
<link rel="mask-icon" href="../../safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="../../posts/2012-07-20-scripting-for-fun/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="/posts/2012-07-20-scripting-for-fun/">
  <meta property="og:site_name" content="Adam Dymitruk">
  <meta property="og:title" content="Scripting for Fun">
  <meta property="og:description" content="I’ve been playing minecraft a couple of nights a week for about 40 minutes each time with my son. This seems to be a trend even for very young children. It wasn’t too long before I found myself running a server so that we could play together with our friends (We even setup a trello board for our missions and projects!). It’s much more fun to work together and build something. Discovering new places and building contraptions, houses and other things is very stimulating for a young mind - as well as my old mind. This generation has so much more at their disposal.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2012-07-20T18:16:00+00:00">
    <meta property="article:modified_time" content="2012-07-20T18:16:00+00:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Scripting for Fun">
<meta name="twitter:description" content="I&rsquo;ve been playing minecraft a couple of nights a week for about 40 minutes each time with my son. This seems to be a trend even for very young children. It wasn&rsquo;t too long before I found myself running a server so that we could play together with our friends (We even setup a trello board for our missions and projects!). It&rsquo;s much more fun to work together and build something. Discovering new places and building contraptions, houses and other things is very stimulating for a young mind - as well as my old mind. This generation has so much more at their disposal.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/posts/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Scripting for Fun",
      "item": "/posts/2012-07-20-scripting-for-fun/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Scripting for Fun",
  "name": "Scripting for Fun",
  "description": "I\u0026rsquo;ve been playing minecraft a couple of nights a week for about 40 minutes each time with my son. This seems to be a trend even for very young children. It wasn\u0026rsquo;t too long before I found myself running a server so that we could play together with our friends (We even setup a trello board for our missions and projects!). It\u0026rsquo;s much more fun to work together and build something. Discovering new places and building contraptions, houses and other things is very stimulating for a young mind - as well as my old mind. This generation has so much more at their disposal.\n",
  "keywords": [
    
  ],
  "articleBody": "I’ve been playing minecraft a couple of nights a week for about 40 minutes each time with my son. This seems to be a trend even for very young children. It wasn’t too long before I found myself running a server so that we could play together with our friends (We even setup a trello board for our missions and projects!). It’s much more fun to work together and build something. Discovering new places and building contraptions, houses and other things is very stimulating for a young mind - as well as my old mind. This generation has so much more at their disposal.\nSince the 2 teams don’t play very often, it would be nice to get notifications when one goes online so the other can join. The server has a log file that we can inspect. So I came up with this little script that emails the other team when we log in and vice versa. I also made the same for logging off. This is scripting 101, but most people I know are programmers and don’t neccessairly dabble in bash.\ntail -F /srv/minecraft-server/server.log | grep --line-buffered 'adymitruk .\\* logged in' | while read line do echo \"Join me if you can.\" | mail -s \"I just logged in to Minecraft\" yourfriend@gmail.com done \u0026 The minecraft log makes it easy to take actions according to what happens in the game. A line gets written saying who logged in and who logged out. Tailing this log and then grepping for those lines, we can send an email. Here’s how you can set up your server to send via gmail.\nThe Details tail This command will give you the last 10 lines of a file by default. You can change this if you like. The -F option will make this command never return and keep monitoring the file for changes, even when the file ceases to be readable.\ngrep This is probably the most well known of linux commands. We are going to filter out lines that only match the regex that we provided. In this case it is looking for the log entry when I log in. You can make this more robust by ensuring the format is more strict. The log in minecraft will log any chat conversations, so a user could spam you with email at this point by chatting a pattern that matches up to this.\nGrep will also buffer input before passing it along. This is why we provide the --line-buffered option. It makes sure that the buffering is limited to only one line. If you omit this, grep will appear to be stuck and you will only get an email if you manage to empty the buffer by causing the log to grow by a significant amount.\nwhile We make a never ending while loop to continue to consume the lines that are being piped from grep. You can enter the statements on a single line if you like but would need to insert semicolons after the do, mail and done lines.\nmail You can email from the command line by piping the message into the mail command. This is what we have done here. Multiple recipients can be listed as well. In this case we just have one.\nbackground process The \u0026 at the end tells the shell to run everything in a background process, freeing up the command line for more instructions. More importantly, the process will be running when you log out of the server and log back in again. If this was a more important process, I would run it as a service instead.\nWe can see these processes with\nps -Af | grep line-buffered -B 1 -A 1 I’m looking for some text that was unique and was used to launch the 2nd process in our pipe chain. Since it is the 2nd one, we also want the first and 3rd processes. It’s highly likely that they will be spawned right after one another and get listed one after the other. So we can ask grep to return one line before and one line after the matched line. We will also get this current grep instance as well when we issue the command but we’ll ignore that:\nadam 21847 1 0 Jul16 ? 00:00:00 tail -F /srv/minecraft-server/server.log adam 21848 1 0 Jul16 ? 00:00:00 grep --color=auto --line-buffered adymitruk .* logged in adam 21849 1 0 Jul16 ? 00:00:00 -bash adam 21853 1 0 Jul16 ? 00:00:00 tail -F /srv/minecraft-server/server.log adam 21854 1 0 Jul16 ? 00:00:00 grep --color=auto --line-buffered adymitruk lost connection adam 21855 1 0 Jul16 ? 00:00:00 -bash adam 21856 1 0 Jul16 ? 00:00:00 tail -F /srv/minecraft-server/server.log adam 21857 1 0 Jul16 ? 00:00:00 grep --color=auto --line-buffered friend .* logged in adam 21858 1 0 Jul16 ? 00:00:00 -bash adam 21862 1 0 Jul16 ? 00:00:00 tail -F /srv/minecraft-server/server.log adam 21863 1 0 Jul16 ? 00:00:00 grep --color=auto --line-buffered friend lost connection adam 21864 1 0 Jul16 ? 00:00:00 -bash If we don’t want these to run anymore, we can issue the kill command followed by the process id - it’s the 2nd column.\nSummary Linux is a wonderful operating system and has matured quite a lot. It can be a lot of fun too. Especially now that Steam is going to be rolling out on a Linux platform, we should be seeing more games where we can do fun things like this.\n",
  "wordCount" : "907",
  "inLanguage": "en",
  "datePublished": "2012-07-20T18:16:00Z",
  "dateModified": "2012-07-20T18:16:00Z",
  "author":{
    "@type": "Person",
    "name": "Adam Dymitruk"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/posts/2012-07-20-scripting-for-fun/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Adam Dymitruk",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="../../" accesskey="h" title="Adam Dymitruk (Alt + H)">Adam Dymitruk</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="../../posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="../../tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="../../archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Scripting for Fun
    </h1>
    <div class="post-meta"><span title='2012-07-20 18:16:00 +0000 UTC'>July 20, 2012</span>&nbsp;·&nbsp;<span>Adam Dymitruk</span>

</div>
  </header> 
  <div class="post-content"><p><img alt="minecraft" src="../../images/minecraft.png" style="float:left;margin:0 10px 10px 0" markdown="0" />I&rsquo;ve been playing minecraft a couple of nights a week for about 40 minutes each time with my son. This seems to be a trend even for very young children. It wasn&rsquo;t too long before I found myself running a server so that we could play together with our friends (We even setup a trello board for our missions and projects!). It&rsquo;s much more fun to work together and build something. Discovering new places and building contraptions, houses and other things is very stimulating for a young mind - as well as my old mind. This generation has so much more at their disposal.</p>
<p>Since the 2 teams don&rsquo;t play very often, it would be nice to get notifications when one goes online so the other can join. The server has a log file that we can inspect. So I came up with this little script that emails the other team when we log in and vice versa. I also made the same for logging off. This is scripting 101, but most people I know are programmers and don&rsquo;t neccessairly dabble in bash.</p>
<pre><code>tail -F /srv/minecraft-server/server.log | 
  grep --line-buffered 'adymitruk .\* logged in' | 
  while read line
  do 
    echo &quot;Join me if you can.&quot; | 
      mail -s &quot;I just logged in to Minecraft&quot; yourfriend@gmail.com 
  done &amp;
</code></pre>
<p>The minecraft log makes it easy to take actions according to what happens in the game. A line gets written saying who logged in and who logged out. Tailing this log and then grepping for those lines, we can send an email. Here&rsquo;s how you can <a href="http://ubuntu-tutorials.com/2008/11/11/relaying-postfix-smtp-via-smtpgmailcom/">set up your server to send via gmail</a>.</p>
<!-- more -->
<h2 id="the-details">The Details<a hidden class="anchor" aria-hidden="true" href="#the-details">#</a></h2>
<h3 id="tail">tail<a hidden class="anchor" aria-hidden="true" href="#tail">#</a></h3>
<p>This command will give you the last 10 lines of a file by default. You can change this if you like. The <code>-F</code> option will make this command never return and keep monitoring the file for changes, even when the file ceases to be readable.</p>
<h3 id="grep">grep<a hidden class="anchor" aria-hidden="true" href="#grep">#</a></h3>
<p>This is probably the most well known of linux commands. We are going to filter out lines that only match the regex that we provided. In this case it is looking for the log entry when I log in. You can make this more robust by ensuring the format is more strict. The log in minecraft will log any chat conversations, so a user could spam you with email at this point by chatting a pattern that matches up to this.</p>
<p>Grep will also buffer input before passing it along. This is why we provide the <code>--line-buffered</code> option. It makes sure that the buffering is limited to only one line. If you omit this, grep will appear to be stuck and you will only get an email if you manage to empty the buffer by causing the log to grow by a significant amount.</p>
<h3 id="while">while<a hidden class="anchor" aria-hidden="true" href="#while">#</a></h3>
<p>We make a never ending while loop to continue to consume the lines that are being piped from grep. You can enter the statements on a single line if you like but would need to insert semicolons after the <code>do</code>, <code>mail</code> and <code>done</code> lines.</p>
<h3 id="mail">mail<a hidden class="anchor" aria-hidden="true" href="#mail">#</a></h3>
<p>You can email from the command line by piping the message into the mail command. This is what we have done here. Multiple recipients can be listed as well. In this case we just have one.</p>
<h3 id="background-process">background process<a hidden class="anchor" aria-hidden="true" href="#background-process">#</a></h3>
<p>The &amp; at the end tells the shell to run everything in a background process, freeing up the command line for more instructions. More importantly, the process will be running when you log out of the server and log back in again. If this was a more important process, I would run it as a service instead.</p>
<p>We can see these processes with</p>
<pre><code>ps -Af | grep line-buffered -B 1 -A 1
</code></pre>
<p>I&rsquo;m looking for some text that was unique and was used to launch the 2nd process in our pipe chain. Since it is the 2nd one, we also want the first and 3rd processes. It&rsquo;s highly likely that they will be spawned right after one another and get listed one after the other. So we can ask grep to return one line before and one line after the matched line. We will also get this current grep instance as well when we issue the command but we&rsquo;ll ignore that:</p>
<pre><code>adam     21847     1  0 Jul16 ?        00:00:00 tail -F /srv/minecraft-server/server.log
adam     21848     1  0 Jul16 ?        00:00:00 grep --color=auto --line-buffered adymitruk .* logged in
adam     21849     1  0 Jul16 ?        00:00:00 -bash
adam     21853     1  0 Jul16 ?        00:00:00 tail -F /srv/minecraft-server/server.log
adam     21854     1  0 Jul16 ?        00:00:00 grep --color=auto --line-buffered adymitruk lost connection
adam     21855     1  0 Jul16 ?        00:00:00 -bash
adam     21856     1  0 Jul16 ?        00:00:00 tail -F /srv/minecraft-server/server.log
adam     21857     1  0 Jul16 ?        00:00:00 grep --color=auto --line-buffered friend .* logged in
adam     21858     1  0 Jul16 ?        00:00:00 -bash
adam     21862     1  0 Jul16 ?        00:00:00 tail -F /srv/minecraft-server/server.log
adam     21863     1  0 Jul16 ?        00:00:00 grep --color=auto --line-buffered friend lost connection
adam     21864     1  0 Jul16 ?        00:00:00 -bash
</code></pre>
<p>If we don&rsquo;t want these to run anymore, we can issue the <code>kill</code> command followed by the process id - it&rsquo;s the 2nd column.</p>
<h2 id="summary">Summary<a hidden class="anchor" aria-hidden="true" href="#summary">#</a></h2>
<p>Linux is a wonderful operating system and has matured quite a lot. It can be a lot of fun too. Especially now that <a href="http://www.co-optimus.com/article/8643/steam-is-coming-to-linux.html">Steam is going to be rolling out on a Linux platform</a>, we should be seeing more games where we can do fun things like this.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="../../">Adam Dymitruk</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
